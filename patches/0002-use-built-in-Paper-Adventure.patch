From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: hsgamer <huynhqtienvtag@gmail.com>
Date: Wed, 24 Jan 2024 14:11:58 +0700
Subject: [PATCH] use built-in Paper Adventure


diff --git a/modules/Legacy/pom.xml b/modules/Legacy/pom.xml
index a1505362866f40509ac9d137d019eec03b223fbc..ab1d23acb9ba42f887dd12e2e7808105f5cb2895 100644
--- a/modules/Legacy/pom.xml
+++ b/modules/Legacy/pom.xml
@@ -34,28 +34,6 @@
             <artifactId>spigot-api</artifactId>
             <version>1.8.8-R0.1-SNAPSHOT</version>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <artifactId>bungeecord-chat</artifactId>
-                    <groupId>net.md-5</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>persistence-api</artifactId>
-                    <groupId>javax.persistence</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>junit</artifactId>
-                    <groupId>junit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>guava</artifactId>
-                    <groupId>com.google.guava</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>gson</artifactId>
-                    <groupId>com.google.code.gson</groupId>
-                </exclusion>
-            </exclusions>
         </dependency>
         <dependency>
             <groupId>com.sk89q.worldguard</groupId>
@@ -64,36 +42,8 @@
             <scope>provided</scope>
             <exclusions>
                 <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bukkit-classloader-check</artifactId>
-                    <groupId>com.sk89q.spigot</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>commandbook</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>js</artifactId>
-                    <groupId>rhino</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>truezip</artifactId>
-                    <groupId>de.schlichtherle</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jchronic</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>worldedit</artifactId>
-                    <groupId>com.sk89q</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
@@ -104,52 +54,8 @@
             <scope>provided</scope>
             <exclusions>
                 <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bukkit-classloader-check</artifactId>
-                    <groupId>org.sk89q.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>dummypermscompat</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jchronic</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>js</artifactId>
-                    <groupId>rhino</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>truezip</artifactId>
-                    <groupId>de.schlichtherle</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jlibnoise</artifactId>
-                    <groupId>com.sk89q.lib</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>paranamer</artifactId>
-                    <groupId>com.thoughtworks.paranamer</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>guava</artifactId>
-                    <groupId>com.google.guava</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>gson</artifactId>
-                    <groupId>com.google.code.gson</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>snakeyaml</artifactId>
-                    <groupId>org.yaml</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
@@ -160,52 +66,8 @@
             <scope>provided</scope>
             <exclusions>
                 <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bukkit-classloader-check</artifactId>
-                    <groupId>org.sk89q.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>dummypermscompat</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jchronic</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>js</artifactId>
-                    <groupId>rhino</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>truezip</artifactId>
-                    <groupId>de.schlichtherle</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jlibnoise</artifactId>
-                    <groupId>com.sk89q.lib</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>paranamer</artifactId>
-                    <groupId>com.thoughtworks.paranamer</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>guava</artifactId>
-                    <groupId>com.google.guava</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>gson</artifactId>
-                    <groupId>com.google.code.gson</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>snakeyaml</artifactId>
-                    <groupId>org.yaml</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
diff --git a/modules/Main/pom.xml b/modules/Main/pom.xml
index 9603fd895d247c8a5daf8b2bac61d3d31705782c..1b50b36c8fd9b09d0edb905708c0e7ca45e0015f 100644
--- a/modules/Main/pom.xml
+++ b/modules/Main/pom.xml
@@ -1,4 +1,4 @@
-<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+<project xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://maven.apache.org/POM/4.0.0"
          xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
     <modelVersion>4.0.0</modelVersion>
 
@@ -55,10 +55,6 @@
                             <pattern>mkremins.fanciful</pattern>
                             <shadedPattern>moss.factions.shade.mkremins.fanciful</shadedPattern>
                         </relocation>
-                        <relocation>
-                            <pattern>com.google</pattern>
-                            <shadedPattern>moss.factions.shade.com.google</shadedPattern>
-                        </relocation>
                         <relocation>
                             <pattern>com.darkblade12</pattern>
                             <shadedPattern>moss.factions.shade.com.darkblade12</shadedPattern>
@@ -79,18 +75,6 @@
                             <pattern>ninja.leaping</pattern>
                             <shadedPattern>moss.factions.shade.ninja.leaping</shadedPattern>
                         </relocation>
-                        <relocation>
-                            <pattern>org.apache.http</pattern>
-                            <shadedPattern>moss.factions.shade.org.apache.http</shadedPattern>
-                        </relocation>
-                        <relocation>
-                            <pattern>org.apache.commons.codec</pattern>
-                            <shadedPattern>moss.factions.shade.org.apache.commons.codec</shadedPattern>
-                        </relocation>
-                        <relocation>
-                            <pattern>org.apache.commons.logging</pattern>
-                            <shadedPattern>moss.factions.shade.org.apache.commons.logging</shadedPattern>
-                        </relocation>
                         <relocation>
                             <pattern>org.kitteh</pattern>
                             <shadedPattern>moss.factions.shade.org.kitteh</shadedPattern>
@@ -99,10 +83,6 @@
                             <pattern>io.papermc.lib</pattern>
                             <shadedPattern>moss.factions.shade.io.paperlib</shadedPattern>
                         </relocation>
-                        <relocation>
-                            <pattern>net.kyori</pattern>
-                            <shadedPattern>moss.factions.shade.net.kyori</shadedPattern>
-                        </relocation>
                     </relocations>
                 </configuration>
                 <executions>
@@ -127,37 +107,15 @@
         <dependency>
             <groupId>io.papermc</groupId>
             <artifactId>paperlib</artifactId>
-            <version>1.0.4</version>
+            <version>1.0.8</version>
             <scope>compile</scope>
             <optional>true</optional>
         </dependency>
         <dependency>
-            <groupId>org.spigotmc</groupId>
-            <artifactId>spigot-api</artifactId>
-            <version>1.17-R0.1-SNAPSHOT</version>
+            <groupId>io.papermc.paper</groupId>
+            <artifactId>paper-api</artifactId>
+            <version>1.18.2-R0.1-SNAPSHOT</version>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <artifactId>bungeecord-chat</artifactId>
-                    <groupId>net.md-5</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>persistence-api</artifactId>
-                    <groupId>javax.persistence</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>junit</artifactId>
-                    <groupId>junit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>guava</artifactId>
-                    <groupId>com.google.guava</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>gson</artifactId>
-                    <groupId>com.google.code.gson</groupId>
-                </exclusion>
-            </exclusions>
         </dependency>
         <dependency>
             <groupId>com.mojang</groupId>
@@ -166,8 +124,8 @@
             <scope>provided</scope>
             <exclusions>
                 <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
@@ -176,12 +134,6 @@
             <artifactId>VaultAPI</artifactId>
             <version>1.7</version>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-            </exclusions>
         </dependency>
         <dependency>
             <groupId>com.sk89q.worldguard</groupId>
@@ -190,36 +142,8 @@
             <scope>provided</scope>
             <exclusions>
                 <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bukkit-classloader-check</artifactId>
-                    <groupId>com.sk89q.spigot</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>commandbook</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>js</artifactId>
-                    <groupId>rhino</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>truezip</artifactId>
-                    <groupId>de.schlichtherle</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jchronic</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>worldedit</artifactId>
-                    <groupId>com.sk89q</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
@@ -230,100 +154,32 @@
             <scope>provided</scope>
             <exclusions>
                 <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bukkit-classloader-check</artifactId>
-                    <groupId>com.sk89q.spigot</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>commandbook</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>js</artifactId>
-                    <groupId>rhino</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>truezip</artifactId>
-                    <groupId>de.schlichtherle</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jchronic</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>worldedit</artifactId>
-                    <groupId>com.sk89q</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
+            </exclusions>
+        </dependency>
+        <dependency>
+            <groupId>com.sk89q.worldedit</groupId>
+            <artifactId>worldedit-core</artifactId>
+            <version>7.2.18</version>
+            <scope>provided</scope>
+            <exclusions>
                 <exclusion>
-                    <artifactId>bstats-bukkit</artifactId>
-                    <groupId>org.bstats</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
         <dependency>
             <groupId>com.sk89q.worldedit</groupId>
             <artifactId>worldedit-bukkit</artifactId>
-            <version>7.0.0-SNAPSHOT</version>
+            <version>7.2.18</version>
             <scope>provided</scope>
             <exclusions>
                 <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bukkit-classloader-check</artifactId>
-                    <groupId>org.sk89q.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>dummypermscompat</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jchronic</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>js</artifactId>
-                    <groupId>rhino</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>truezip</artifactId>
-                    <groupId>de.schlichtherle</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jlibnoise</artifactId>
-                    <groupId>com.sk89q.lib</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>paranamer</artifactId>
-                    <groupId>com.thoughtworks.paranamer</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>guava</artifactId>
-                    <groupId>com.google.guava</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>gson</artifactId>
-                    <groupId>com.google.code.gson</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>snakeyaml</artifactId>
-                    <groupId>org.yaml</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bstats-bukkit</artifactId>
-                    <groupId>org.bstats</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
@@ -338,92 +194,18 @@
             <artifactId>EssentialsXChat</artifactId>
             <version>2.0.1</version>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>lombok</artifactId>
-                    <groupId>org.projectlombok</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>Essentials</artifactId>
-                    <groupId>net.ess3</groupId>
-                </exclusion>
-            </exclusions>
         </dependency>
         <dependency>
             <groupId>org.dynmap</groupId>
             <artifactId>dynmap</artifactId>
             <version>2.0</version>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>Permissions</artifactId>
-                    <groupId>com.nijikokun.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bPermissions</artifactId>
-                    <groupId>de.bananaco</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>EssentialsGroupManager</artifactId>
-                    <groupId>org.anjocaido</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>spoutpluginapi</artifactId>
-                    <groupId>org.getspout</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>PermissionsBukkit</artifactId>
-                    <groupId>com.platymuus.bukkit.permissions</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>PermissionsEx</artifactId>
-                    <groupId>ru.tehkode</groupId>
-                </exclusion>
-            </exclusions>
-        </dependency>
-        <dependency>
-            <groupId>com.google.guava</groupId>
-            <artifactId>guava</artifactId>
-            <version>31.1-jre</version>
-            <scope>compile</scope>
-            <optional>true</optional>
-            <exclusions>
-                <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>checker-qual</artifactId>
-                    <groupId>org.checkerframework</groupId>
-                </exclusion>
-            </exclusions>
-        </dependency>
-        <dependency>
-            <groupId>com.google.code.gson</groupId>
-            <artifactId>gson</artifactId>
-            <version>2.9.1</version>
-            <scope>compile</scope>
-            <optional>true</optional>
         </dependency>
         <dependency>
             <groupId>com.drtshock</groupId>
             <artifactId>PlayerVaultsX</artifactId>
             <version>4.2.14</version>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <groupId>org.kitteh</groupId>
-                    <artifactId>*</artifactId>
-                </exclusion>
-            </exclusions>
         </dependency>
         <dependency>
             <groupId>me.clip</groupId>
@@ -436,12 +218,6 @@
             <artifactId>MVdWPlaceholderAPI</artifactId>
             <version>2.2.3-fuuid</version>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <groupId>org.spigotmc</groupId>
-                    <artifactId>spigot</artifactId>
-                </exclusion>
-            </exclusions>
         </dependency>
         <dependency>
             <groupId>com.darkblade12</groupId>
@@ -449,12 +225,24 @@
             <version>1.8.0-fuuid</version>
             <optional>true</optional>
         </dependency>
+        <dependency>
+            <groupId>com.mojang</groupId>
+            <artifactId>brigadier</artifactId>
+            <version>1.0.18</version>
+            <scope>provided</scope>
+        </dependency>
         <dependency>
             <groupId>me.lucko</groupId>
             <artifactId>commodore</artifactId>
             <version>2.2</version>
             <scope>compile</scope>
             <optional>true</optional>
+            <exclusions>
+                <exclusion>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
+                </exclusion>
+            </exclusions>
         </dependency>
         <dependency>
             <groupId>com.griefcraft.lwc</groupId>
@@ -482,12 +270,6 @@
             <version>2.0.30-SNAPSHOT</version>
             <type>jar</type>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <groupId>*</groupId>
-                    <artifactId>*</artifactId>
-                </exclusion>
-            </exclusions>
         </dependency>
         <dependency>
             <groupId>com.denizenscript</groupId>
@@ -503,46 +285,16 @@
             <optional>true</optional>
             <exclusions>
                 <exclusion>
-                    <artifactId>checker-qual</artifactId>
-                    <groupId>org.checkerframework</groupId>
+                    <groupId>com.google.guava</groupId>
+                    <artifactId>guava</artifactId>
                 </exclusion>
                 <exclusion>
                     <groupId>com.google.inject</groupId>
                     <artifactId>guice</artifactId>
                 </exclusion>
-            </exclusions>
-        </dependency>
-        <dependency>
-            <groupId>net.kyori</groupId>
-            <artifactId>adventure-platform-bukkit</artifactId>
-            <version>4.3.2</version>
-            <scope>compile</scope>
-            <optional>true</optional>
-            <exclusions>
                 <exclusion>
-                    <artifactId>checker-qual</artifactId>
                     <groupId>org.checkerframework</groupId>
-                </exclusion>
-                <exclusion>
-                    <groupId>org.jetbrains</groupId>
-                    <artifactId>annotations</artifactId>
-                </exclusion>
-            </exclusions>
-        </dependency>
-        <dependency>
-            <groupId>net.kyori</groupId>
-            <artifactId>adventure-text-minimessage</artifactId>
-            <version>4.15.0</version>
-            <scope>compile</scope>
-            <optional>true</optional>
-            <exclusions>
-                <exclusion>
                     <artifactId>checker-qual</artifactId>
-                    <groupId>org.checkerframework</groupId>
-                </exclusion>
-                <exclusion>
-                    <groupId>org.jetbrains</groupId>
-                    <artifactId>annotations</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
@@ -566,10 +318,16 @@
             <type>jar</type>
             <scope>provided</scope>
         </dependency>
+        <dependency>
+            <groupId>junit</groupId>
+            <artifactId>junit</artifactId>
+            <version>4.13.2</version>
+            <scope>test</scope>
+        </dependency>
         <dependency>
             <groupId>org.junit.jupiter</groupId>
             <artifactId>junit-jupiter</artifactId>
-            <version>5.5.1</version>
+            <version>5.9.2</version>
             <scope>test</scope>
         </dependency>
     </dependencies>
diff --git a/src/main/java/com/massivecraft/factions/FactionsPlugin.java b/src/main/java/com/massivecraft/factions/FactionsPlugin.java
index 7943586c502beaf822951f280ea905bc22589d6d..c54dab8fedfeced34ca91b05b3228bbfaf384a2e 100644
--- a/src/main/java/com/massivecraft/factions/FactionsPlugin.java
+++ b/src/main/java/com/massivecraft/factions/FactionsPlugin.java
@@ -62,7 +62,6 @@ import com.massivecraft.factions.util.particle.ParticleProvider;
 import com.mojang.authlib.GameProfile;
 import io.papermc.lib.PaperLib;
 import net.kyori.adventure.audience.Audience;
-import net.kyori.adventure.platform.bukkit.BukkitAudiences;
 import net.kyori.adventure.text.Component;
 import net.kyori.adventure.text.format.TextColor;
 import net.kyori.adventure.text.minimessage.MiniMessage;
@@ -194,7 +193,6 @@ public class FactionsPlugin extends JavaPlugin implements FactionsAPI {
     public final boolean likesCats = Arrays.stream(FactionsPlugin.class.getDeclaredMethods()).anyMatch(m -> m.isSynthetic() && m.getName().startsWith("loadCon") && m.getName().endsWith("0"));
     private boolean gottaSlapEssentials;
     private Method getOffline;
-    private BukkitAudiences adventure;
     private String mcVersionString;
     private String updateCheck;
     private Response updateResponse;
@@ -306,7 +304,6 @@ public class FactionsPlugin extends JavaPlugin implements FactionsAPI {
     @Override
     public void onEnable() {
         this.loadSuccessful = false;
-        this.adventure = BukkitAudiences.create(this);
         StringBuilder startupBuilder = new StringBuilder();
         StringBuilder startupExceptionBuilder = new StringBuilder();
         Handler handler = new Handler() {
@@ -1052,7 +1049,6 @@ public class FactionsPlugin extends JavaPlugin implements FactionsAPI {
             LuckPerms.shutdown(this);
         }
         ContextManager.shutdown();
-        this.adventure.close();
         log("Disabled");
     }
 
@@ -1257,10 +1253,6 @@ public class FactionsPlugin extends JavaPlugin implements FactionsAPI {
         return this.getServer().getOfflinePlayer(name);
     }
 
-    public BukkitAudiences getAdventure() {
-        return this.adventure;
-    }
-
     private static class UpdateCheck {
         private String pluginName;
         private String pluginVersion;
@@ -1324,15 +1316,14 @@ public class FactionsPlugin extends JavaPlugin implements FactionsAPI {
             return;
         }
         this.told.add(player.getUniqueId());
-        Audience audience = this.adventure.player(player);
-        audience.sendMessage(Component.text().color(TextColor.fromHexString("#e35959"))
+        player.sendMessage(Component.text().color(TextColor.fromHexString("#e35959"))
                 .content("FactionsUUID Update Available: " + updateResponse.getLatestVersion()));
         if (updateResponse.isUrgent()) {
-            audience.sendMessage(Component.text().color(TextColor.fromHexString("#5E0B15"))
+            player.sendMessage(Component.text().color(TextColor.fromHexString("#5E0B15"))
                     .content("This is an important update. Download and restart ASAP."));
         }
         if (updateResponse.getComponent() != null) {
-            audience.sendMessage(updateResponse.getComponent());
+            player.sendMessage(updateResponse.getComponent());
         }
         player.sendMessage(ChatColor.GREEN + "Get it at " + ChatColor.DARK_AQUA + "https://www.spigotmc.org/resources/factionsuuid.1035/");
     }
diff --git a/src/main/java/com/massivecraft/factions/cmd/CmdColeader.java b/src/main/java/com/massivecraft/factions/cmd/CmdColeader.java
index 8032513106b1e037f1716bddd1fa57065d2b5621..9e399a3fb8a8616fa5f8ccf2caeb97c24ac48fe5 100644
--- a/src/main/java/com/massivecraft/factions/cmd/CmdColeader.java
+++ b/src/main/java/com/massivecraft/factions/cmd/CmdColeader.java
@@ -42,7 +42,7 @@ public class CmdColeader extends FCommand {
                         .clickEvent(ClickEvent.runCommand("/" + FactionsPlugin.getInstance().conf().getCommandBase().get(0) + " coleader " + s))
                 );
             }
-            FactionsPlugin.getInstance().getAdventure().player(context.player).sendMessage(component);
+            context.player.sendMessage(component);
             return;
         }
 
diff --git a/src/main/java/com/massivecraft/factions/cmd/CmdDeinvite.java b/src/main/java/com/massivecraft/factions/cmd/CmdDeinvite.java
index f753f7f8dde3eafd14ebd3b33e4031af75325525..96697d705f13d088a3b04ce55916cfc539dfa89c 100644
--- a/src/main/java/com/massivecraft/factions/cmd/CmdDeinvite.java
+++ b/src/main/java/com/massivecraft/factions/cmd/CmdDeinvite.java
@@ -41,7 +41,7 @@ public class CmdDeinvite extends FCommand {
                         .clickEvent(ClickEvent.runCommand("/" + FactionsPlugin.getInstance().conf().getCommandBase().get(0) + " deinvite " + name))
                 );
             }
-            FactionsPlugin.getInstance().getAdventure().player(context.player).sendMessage(component);
+            context.player.sendMessage(component);
             return;
         }
 
diff --git a/src/main/java/com/massivecraft/factions/cmd/CmdInvite.java b/src/main/java/com/massivecraft/factions/cmd/CmdInvite.java
index a936cc9fa84b33a839c1e2102a6d98e2b4a7595a..bd65646cba33e1c25335ba41551249796712e962 100644
--- a/src/main/java/com/massivecraft/factions/cmd/CmdInvite.java
+++ b/src/main/java/com/massivecraft/factions/cmd/CmdInvite.java
@@ -57,7 +57,7 @@ public class CmdInvite extends FCommand {
                     .append(legacy.deserialize(context.faction.describeTo(target)));
             component = component.hoverEvent(legacy.deserialize(TL.COMMAND_INVITE_CLICKTOJOIN.toString()).asHoverEvent())
                     .clickEvent(ClickEvent.runCommand("/" + FactionsPlugin.getInstance().conf().getCommandBase().get(0) + " join " + ChatColor.stripColor(context.faction.getTag())));
-            FactionsPlugin.getInstance().getAdventure().player(target.getPlayer()).sendMessage(component);
+            target.getPlayer().sendMessage(component);
         }
 
         //you.msg("%s<i> invited you to %s",context.fPlayer.describeTo(you, true), context.faction.describeTo(you));
diff --git a/src/main/java/com/massivecraft/factions/cmd/CmdKick.java b/src/main/java/com/massivecraft/factions/cmd/CmdKick.java
index e7819441ac8115eab83cc74bd291b988bfa5b4f0..6a9e6c6e3ea5d4e88ccfa748342849c839b7c564 100644
--- a/src/main/java/com/massivecraft/factions/cmd/CmdKick.java
+++ b/src/main/java/com/massivecraft/factions/cmd/CmdKick.java
@@ -63,7 +63,7 @@ public class CmdKick extends FCommand {
                 }
             }
 
-            FactionsPlugin.getInstance().getAdventure().player(context.player).sendMessage(component);
+            context.player.sendMessage(component);
             return;
         }
 
diff --git a/src/main/java/com/massivecraft/factions/cmd/CmdMap.java b/src/main/java/com/massivecraft/factions/cmd/CmdMap.java
index 90fdacd61cdd9fbc08dc2f2176da4546999183fe..f2d33b51d7f538b7c3a2afd9fcaa4403e233f1ec 100644
--- a/src/main/java/com/massivecraft/factions/cmd/CmdMap.java
+++ b/src/main/java/com/massivecraft/factions/cmd/CmdMap.java
@@ -5,7 +5,6 @@ import com.massivecraft.factions.FLocation;
 import com.massivecraft.factions.FactionsPlugin;
 import com.massivecraft.factions.struct.Permission;
 import com.massivecraft.factions.util.TL;
-import net.kyori.adventure.audience.Audience;
 import net.kyori.adventure.text.Component;
 
 
@@ -55,9 +54,8 @@ public class CmdMap extends FCommand {
     }
 
     public void showMap(CommandContext context) {
-        Audience audience = FactionsPlugin.getInstance().getAdventure().player(context.player);
         for (Component component : Board.getInstance().getMap(context.fPlayer, new FLocation(context.fPlayer), context.fPlayer.getPlayer().getLocation().getYaw())) {
-            audience.sendMessage(component);
+            context.player.sendMessage(component);
         }
     }
 
diff --git a/src/main/java/com/massivecraft/factions/cmd/CmdMod.java b/src/main/java/com/massivecraft/factions/cmd/CmdMod.java
index 35c3ba77f4a805da6a9056dd0f5b7595903ac6fc..56054f38210a509791f6262be68748f298658242 100644
--- a/src/main/java/com/massivecraft/factions/cmd/CmdMod.java
+++ b/src/main/java/com/massivecraft/factions/cmd/CmdMod.java
@@ -43,7 +43,7 @@ public class CmdMod extends FCommand {
                 );
             }
 
-            FactionsPlugin.getInstance().getAdventure().player(context.player).sendMessage(component);
+            context.player.sendMessage(component);
             return;
         }
 
diff --git a/src/main/java/com/massivecraft/factions/cmd/CmdPerm.java b/src/main/java/com/massivecraft/factions/cmd/CmdPerm.java
index 0a6023888907d62786c6e1e307b9eacc37ebb439..b8ffb1e78a02031500435e66a0d56447d214d183 100644
--- a/src/main/java/com/massivecraft/factions/cmd/CmdPerm.java
+++ b/src/main/java/com/massivecraft/factions/cmd/CmdPerm.java
@@ -71,7 +71,7 @@ public class CmdPerm extends FCommand {
 
         @Override
         public void perform(CommandContext context) {
-            Audience audience = FactionsPlugin.getInstance().getAdventure().player(context.player);
+            Audience audience = context.player;
             LinkedHashMap<PermSelector, Map<String, Boolean>> permissions = ((MemoryFaction) context.faction).getPermissions();
             this.perform(context, audience, permissions, FactionsPlugin.getInstance().tl().commands().permissions());
         }
@@ -393,7 +393,7 @@ public class CmdPerm extends FCommand {
 
     @Override
     public void perform(CommandContext context) {
-        listSelectors(context, FactionsPlugin.getInstance().getAdventure().player(context.player), ((MemoryFaction) context.faction).getPermissions(), FactionsPlugin.getInstance().tl().commands().permissions());
+        listSelectors(context, context.player, ((MemoryFaction) context.faction).getPermissions(), FactionsPlugin.getInstance().tl().commands().permissions());
     }
 
     private void listSelectors(CommandContext context, Audience audience, LinkedHashMap<PermSelector, Map<String, Boolean>> permissions, TranslationsConfig.Commands.Permissions tl) {
diff --git a/src/main/java/com/massivecraft/factions/cmd/CmdShow.java b/src/main/java/com/massivecraft/factions/cmd/CmdShow.java
index 2fa6c4c8f6976ffec0a356a65df431b1fa8be464..8f2c212f79232eff2fbe74186f9fdd503e709b54 100644
--- a/src/main/java/com/massivecraft/factions/cmd/CmdShow.java
+++ b/src/main/java/com/massivecraft/factions/cmd/CmdShow.java
@@ -11,7 +11,6 @@ import com.massivecraft.factions.tag.FancyTag;
 import com.massivecraft.factions.tag.Tag;
 import com.massivecraft.factions.util.MiscUtil;
 import com.massivecraft.factions.util.TL;
-import net.kyori.adventure.audience.Audience;
 import net.kyori.adventure.text.Component;
 import net.kyori.adventure.text.serializer.legacy.LegacyComponentSerializer;
 import org.bukkit.Bukkit;
@@ -128,7 +127,6 @@ public class CmdShow extends FCommand {
     }
 
     private void sendMessages(List<String> messageList, CommandSender recipient, Faction faction, FPlayer player, Map<UUID, String> groupMap) {
-        Audience audience = this.plugin.getAdventure().sender(recipient);
         FancyTag tag;
         for (String parsed : messageList) {
             if ((tag = FancyTag.getMatch(parsed)) != null) {
@@ -136,7 +134,7 @@ public class CmdShow extends FCommand {
                     List<Component> fancy = FancyTag.parse(parsed, faction, player, groupMap);
                     if (fancy != null) {
                         for (Component component : fancy) {
-                            audience.sendMessage(component);
+                            recipient.sendMessage(component);
                         }
                     }
                 } else {
@@ -163,7 +161,7 @@ public class CmdShow extends FCommand {
                     }
                 }
             } else {
-                audience.sendMessage(LegacyComponentSerializer.legacySection().deserialize(FactionsPlugin.getInstance().txt().parse(parsed)));
+                recipient.sendMessage(LegacyComponentSerializer.legacySection().deserialize(FactionsPlugin.getInstance().txt().parse(parsed)));
             }
         }
     }
diff --git a/src/main/java/com/massivecraft/factions/cmd/CmdShowInvites.java b/src/main/java/com/massivecraft/factions/cmd/CmdShowInvites.java
index cde185506c64457b86fd1806b30b6407af5bd74a..cb39e7a625a60cf05d8ad095590b5a1488446e11 100644
--- a/src/main/java/com/massivecraft/factions/cmd/CmdShowInvites.java
+++ b/src/main/java/com/massivecraft/factions/cmd/CmdShowInvites.java
@@ -34,7 +34,7 @@ public class CmdShowInvites extends FCommand {
             );
         }
 
-        FactionsPlugin.getInstance().getAdventure().player(context.player).sendMessage(component);
+        context.player.sendMessage(component);
     }
 
     @Override
diff --git a/src/main/java/com/massivecraft/factions/cmd/CmdTicketInfo.java b/src/main/java/com/massivecraft/factions/cmd/CmdTicketInfo.java
index a7c1eabc465900195a65b8c1e2ad11b7ab4ad518..6e0a2548a0570b85f44cba09ea2507ad1ee62c89 100644
--- a/src/main/java/com/massivecraft/factions/cmd/CmdTicketInfo.java
+++ b/src/main/java/com/massivecraft/factions/cmd/CmdTicketInfo.java
@@ -131,7 +131,7 @@ public class CmdTicketInfo extends FCommand {
         } catch (Throwable ignored) {
         }
 
-        Audience audience = plugin.getAdventure().sender(context.sender);
+        Audience audience = context.sender;
 
         boolean full = context.argAsString(0, "").equalsIgnoreCase("full");
 
diff --git a/src/main/java/com/massivecraft/factions/listeners/FactionsPlayerListener.java b/src/main/java/com/massivecraft/factions/listeners/FactionsPlayerListener.java
index 3ca835df458e3a68043dda179fb96a9b1083d6b9..21fe7f9cf143d451a3f8b4e46217391dd0cca8eb 100644
--- a/src/main/java/com/massivecraft/factions/listeners/FactionsPlayerListener.java
+++ b/src/main/java/com/massivecraft/factions/listeners/FactionsPlayerListener.java
@@ -18,7 +18,6 @@ import com.massivecraft.factions.struct.Permission;
 import com.massivecraft.factions.util.TL;
 import com.massivecraft.factions.util.TextUtil;
 import com.massivecraft.factions.util.VisualizeUtil;
-import net.kyori.adventure.audience.Audience;
 import net.kyori.adventure.text.Component;
 import org.bukkit.GameMode;
 import org.bukkit.Location;
@@ -317,9 +316,8 @@ public class FactionsPlayerListener extends AbstractListener {
 
         if (me.isMapAutoUpdating()) {
             if (!showTimes.containsKey(player.getUniqueId()) || (showTimes.get(player.getUniqueId()) < System.currentTimeMillis())) {
-                Audience audience = FactionsPlugin.getInstance().getAdventure().player(player);
                 for (Component component : Board.getInstance().getMap(me, to, player.getLocation().getYaw())) {
-                    audience.sendMessage(component);
+                    player.sendMessage(component);
                 }
                 showTimes.put(player.getUniqueId(), System.currentTimeMillis() + FactionsPlugin.getInstance().conf().commands().map().getCooldown());
             }
diff --git a/src/main/java/com/massivecraft/factions/tag/FancyTag.java b/src/main/java/com/massivecraft/factions/tag/FancyTag.java
index 850aa5a5a4aa2dc7f63dcf408a61afd04e43ce6b..66d1c6ea5828a6afe4bba990a727b800146336a1 100644
--- a/src/main/java/com/massivecraft/factions/tag/FancyTag.java
+++ b/src/main/java/com/massivecraft/factions/tag/FancyTag.java
@@ -107,7 +107,7 @@ public enum FancyTag implements Tag {
         boolean lb = false;
         for (String tipLine : lines) {
             if (lb) {
-                tip.appendNewline();
+                tip.append(Component.newline());
             }
             lb = true;
             tip.append(LegacyComponentSerializer.legacySection().deserialize(tipLine));
