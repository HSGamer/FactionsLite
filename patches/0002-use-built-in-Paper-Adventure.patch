From cb6e99d240a135167acd168933816f429e936fe2 Mon Sep 17 00:00:00 2001
From: hsgamer <huynhqtienvtag@gmail.com>
Date: Wed, 24 Jan 2024 14:11:58 +0700
Subject: [PATCH] use built-in Paper Adventure

---
 modules/Legacy/pom.xml                        | 150 +-------
 modules/Main/pom.xml                          | 332 ++----------------
 .../massivecraft/factions/FactionsPlugin.java |  15 +-
 .../com/massivecraft/factions/cmd/CmdMap.java |   4 +-
 .../massivecraft/factions/cmd/CmdPerm.java    |   4 +-
 .../massivecraft/factions/cmd/CmdShow.java    |   6 +-
 .../factions/cmd/CmdTicketInfo.java           |   2 +-
 .../listeners/FactionsPlayerListener.java     |   4 +-
 .../massivecraft/factions/tag/FancyTag.java   |   2 +-
 9 files changed, 55 insertions(+), 464 deletions(-)

diff --git a/modules/Legacy/pom.xml b/modules/Legacy/pom.xml
index 9f404729..d1e12175 100644
--- a/modules/Legacy/pom.xml
+++ b/modules/Legacy/pom.xml
@@ -34,28 +34,6 @@
             <artifactId>spigot-api</artifactId>
             <version>1.8.8-R0.1-SNAPSHOT</version>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <artifactId>bungeecord-chat</artifactId>
-                    <groupId>net.md-5</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>persistence-api</artifactId>
-                    <groupId>javax.persistence</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>junit</artifactId>
-                    <groupId>junit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>guava</artifactId>
-                    <groupId>com.google.guava</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>gson</artifactId>
-                    <groupId>com.google.code.gson</groupId>
-                </exclusion>
-            </exclusions>
         </dependency>
         <dependency>
             <groupId>com.sk89q.worldguard</groupId>
@@ -64,36 +42,8 @@
             <scope>provided</scope>
             <exclusions>
                 <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bukkit-classloader-check</artifactId>
-                    <groupId>com.sk89q.spigot</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>commandbook</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>js</artifactId>
-                    <groupId>rhino</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>truezip</artifactId>
-                    <groupId>de.schlichtherle</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jchronic</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>worldedit</artifactId>
-                    <groupId>com.sk89q</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
@@ -104,52 +54,8 @@
             <scope>provided</scope>
             <exclusions>
                 <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bukkit-classloader-check</artifactId>
-                    <groupId>org.sk89q.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>dummypermscompat</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jchronic</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>js</artifactId>
-                    <groupId>rhino</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>truezip</artifactId>
-                    <groupId>de.schlichtherle</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jlibnoise</artifactId>
-                    <groupId>com.sk89q.lib</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>paranamer</artifactId>
-                    <groupId>com.thoughtworks.paranamer</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>guava</artifactId>
-                    <groupId>com.google.guava</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>gson</artifactId>
-                    <groupId>com.google.code.gson</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>snakeyaml</artifactId>
-                    <groupId>org.yaml</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
@@ -160,52 +66,8 @@
             <scope>provided</scope>
             <exclusions>
                 <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bukkit-classloader-check</artifactId>
-                    <groupId>org.sk89q.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>dummypermscompat</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jchronic</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>js</artifactId>
-                    <groupId>rhino</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>truezip</artifactId>
-                    <groupId>de.schlichtherle</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jlibnoise</artifactId>
-                    <groupId>com.sk89q.lib</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>paranamer</artifactId>
-                    <groupId>com.thoughtworks.paranamer</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>guava</artifactId>
-                    <groupId>com.google.guava</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>gson</artifactId>
-                    <groupId>com.google.code.gson</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>snakeyaml</artifactId>
-                    <groupId>org.yaml</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
diff --git a/modules/Main/pom.xml b/modules/Main/pom.xml
index 49595c79..498bda46 100644
--- a/modules/Main/pom.xml
+++ b/modules/Main/pom.xml
@@ -55,10 +55,6 @@
                             <pattern>mkremins.fanciful</pattern>
                             <shadedPattern>moss.factions.shade.mkremins.fanciful</shadedPattern>
                         </relocation>
-                        <relocation>
-                            <pattern>com.google</pattern>
-                            <shadedPattern>moss.factions.shade.com.google</shadedPattern>
-                        </relocation>
                         <relocation>
                             <pattern>com.darkblade12</pattern>
                             <shadedPattern>moss.factions.shade.com.darkblade12</shadedPattern>
@@ -79,18 +75,6 @@
                             <pattern>ninja.leaping</pattern>
                             <shadedPattern>moss.factions.shade.ninja.leaping</shadedPattern>
                         </relocation>
-                        <relocation>
-                            <pattern>org.apache.http</pattern>
-                            <shadedPattern>moss.factions.shade.org.apache.http</shadedPattern>
-                        </relocation>
-                        <relocation>
-                            <pattern>org.apache.commons.codec</pattern>
-                            <shadedPattern>moss.factions.shade.org.apache.commons.codec</shadedPattern>
-                        </relocation>
-                        <relocation>
-                            <pattern>org.apache.commons.logging</pattern>
-                            <shadedPattern>moss.factions.shade.org.apache.commons.logging</shadedPattern>
-                        </relocation>
                         <relocation>
                             <pattern>org.kitteh</pattern>
                             <shadedPattern>moss.factions.shade.org.kitteh</shadedPattern>
@@ -99,10 +83,6 @@
                             <pattern>io.papermc.lib</pattern>
                             <shadedPattern>moss.factions.shade.io.paperlib</shadedPattern>
                         </relocation>
-                        <relocation>
-                            <pattern>net.kyori</pattern>
-                            <shadedPattern>moss.factions.shade.net.kyori</shadedPattern>
-                        </relocation>
                     </relocations>
                 </configuration>
                 <executions>
@@ -127,37 +107,15 @@
         <dependency>
             <groupId>io.papermc</groupId>
             <artifactId>paperlib</artifactId>
-            <version>1.0.4</version>
+            <version>1.0.8</version>
             <scope>compile</scope>
             <optional>true</optional>
         </dependency>
         <dependency>
-            <groupId>org.spigotmc</groupId>
-            <artifactId>spigot-api</artifactId>
-            <version>1.17-R0.1-SNAPSHOT</version>
+            <groupId>io.papermc.paper</groupId>
+            <artifactId>paper-api</artifactId>
+            <version>1.18.2-R0.1-SNAPSHOT</version>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <artifactId>bungeecord-chat</artifactId>
-                    <groupId>net.md-5</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>persistence-api</artifactId>
-                    <groupId>javax.persistence</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>junit</artifactId>
-                    <groupId>junit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>guava</artifactId>
-                    <groupId>com.google.guava</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>gson</artifactId>
-                    <groupId>com.google.code.gson</groupId>
-                </exclusion>
-            </exclusions>
         </dependency>
         <dependency>
             <groupId>com.mojang</groupId>
@@ -166,8 +124,8 @@
             <scope>provided</scope>
             <exclusions>
                 <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
@@ -176,12 +134,6 @@
             <artifactId>VaultAPI</artifactId>
             <version>1.7</version>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-            </exclusions>
         </dependency>
         <dependency>
             <groupId>com.sk89q.worldguard</groupId>
@@ -190,36 +142,8 @@
             <scope>provided</scope>
             <exclusions>
                 <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bukkit-classloader-check</artifactId>
-                    <groupId>com.sk89q.spigot</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>commandbook</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>js</artifactId>
-                    <groupId>rhino</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>truezip</artifactId>
-                    <groupId>de.schlichtherle</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jchronic</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>worldedit</artifactId>
-                    <groupId>com.sk89q</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
@@ -230,100 +154,32 @@
             <scope>provided</scope>
             <exclusions>
                 <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bukkit-classloader-check</artifactId>
-                    <groupId>com.sk89q.spigot</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>commandbook</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>js</artifactId>
-                    <groupId>rhino</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>truezip</artifactId>
-                    <groupId>de.schlichtherle</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jchronic</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>worldedit</artifactId>
-                    <groupId>com.sk89q</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
+            </exclusions>
+        </dependency>
+        <dependency>
+            <groupId>com.sk89q.worldedit</groupId>
+            <artifactId>worldedit-core</artifactId>
+            <version>7.2.18</version>
+            <scope>provided</scope>
+            <exclusions>
                 <exclusion>
-                    <artifactId>bstats-bukkit</artifactId>
-                    <groupId>org.bstats</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
         <dependency>
             <groupId>com.sk89q.worldedit</groupId>
             <artifactId>worldedit-bukkit</artifactId>
-            <version>7.0.0-SNAPSHOT</version>
+            <version>7.2.18</version>
             <scope>provided</scope>
             <exclusions>
                 <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bukkit-classloader-check</artifactId>
-                    <groupId>org.sk89q.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>dummypermscompat</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jchronic</artifactId>
-                    <groupId>com.sk89q</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>js</artifactId>
-                    <groupId>rhino</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>truezip</artifactId>
-                    <groupId>de.schlichtherle</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>jlibnoise</artifactId>
-                    <groupId>com.sk89q.lib</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>paranamer</artifactId>
-                    <groupId>com.thoughtworks.paranamer</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>guava</artifactId>
-                    <groupId>com.google.guava</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>gson</artifactId>
-                    <groupId>com.google.code.gson</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>snakeyaml</artifactId>
-                    <groupId>org.yaml</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bstats-bukkit</artifactId>
-                    <groupId>org.bstats</groupId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
@@ -338,92 +194,18 @@
             <artifactId>EssentialsXChat</artifactId>
             <version>2.0.1</version>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>lombok</artifactId>
-                    <groupId>org.projectlombok</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>Essentials</artifactId>
-                    <groupId>net.ess3</groupId>
-                </exclusion>
-            </exclusions>
         </dependency>
         <dependency>
             <groupId>org.dynmap</groupId>
             <artifactId>dynmap</artifactId>
             <version>2.0</version>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <artifactId>bukkit</artifactId>
-                    <groupId>org.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>Permissions</artifactId>
-                    <groupId>com.nijikokun.bukkit</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>bPermissions</artifactId>
-                    <groupId>de.bananaco</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>EssentialsGroupManager</artifactId>
-                    <groupId>org.anjocaido</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>spoutpluginapi</artifactId>
-                    <groupId>org.getspout</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>PermissionsBukkit</artifactId>
-                    <groupId>com.platymuus.bukkit.permissions</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>PermissionsEx</artifactId>
-                    <groupId>ru.tehkode</groupId>
-                </exclusion>
-            </exclusions>
-        </dependency>
-        <dependency>
-            <groupId>com.google.guava</groupId>
-            <artifactId>guava</artifactId>
-            <version>31.1-jre</version>
-            <scope>compile</scope>
-            <optional>true</optional>
-            <exclusions>
-                <exclusion>
-                    <artifactId>jsr305</artifactId>
-                    <groupId>com.google.code.findbugs</groupId>
-                </exclusion>
-                <exclusion>
-                    <artifactId>checker-qual</artifactId>
-                    <groupId>org.checkerframework</groupId>
-                </exclusion>
-            </exclusions>
-        </dependency>
-        <dependency>
-            <groupId>com.google.code.gson</groupId>
-            <artifactId>gson</artifactId>
-            <version>2.9.1</version>
-            <scope>compile</scope>
-            <optional>true</optional>
         </dependency>
         <dependency>
             <groupId>com.drtshock</groupId>
             <artifactId>PlayerVaultsX</artifactId>
             <version>4.2.14</version>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <groupId>org.kitteh</groupId>
-                    <artifactId>*</artifactId>
-                </exclusion>
-            </exclusions>
         </dependency>
         <dependency>
             <groupId>me.clip</groupId>
@@ -436,12 +218,6 @@
             <artifactId>MVdWPlaceholderAPI</artifactId>
             <version>2.2.3-fuuid</version>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <groupId>org.spigotmc</groupId>
-                    <artifactId>spigot</artifactId>
-                </exclusion>
-            </exclusions>
         </dependency>
         <dependency>
             <groupId>com.darkblade12</groupId>
@@ -455,6 +231,12 @@
             <version>2.2</version>
             <scope>compile</scope>
             <optional>true</optional>
+            <exclusions>
+                <exclusion>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
+                </exclusion>
+            </exclusions>
         </dependency>
         <dependency>
             <groupId>com.griefcraft.lwc</groupId>
@@ -482,12 +264,6 @@
             <version>2.0.30-SNAPSHOT</version>
             <type>jar</type>
             <scope>provided</scope>
-            <exclusions>
-                <exclusion>
-                    <groupId>*</groupId>
-                    <artifactId>*</artifactId>
-                </exclusion>
-            </exclusions>
         </dependency>
         <dependency>
             <groupId>com.denizenscript</groupId>
@@ -503,46 +279,8 @@
             <optional>true</optional>
             <exclusions>
                 <exclusion>
-                    <artifactId>checker-qual</artifactId>
-                    <groupId>org.checkerframework</groupId>
-                </exclusion>
-                <exclusion>
-                    <groupId>com.google.inject</groupId>
-                    <artifactId>guice</artifactId>
-                </exclusion>
-            </exclusions>
-        </dependency>
-        <dependency>
-            <groupId>net.kyori</groupId>
-            <artifactId>adventure-platform-bukkit</artifactId>
-            <version>4.3.2</version>
-            <scope>compile</scope>
-            <optional>true</optional>
-            <exclusions>
-                <exclusion>
-                    <artifactId>checker-qual</artifactId>
-                    <groupId>org.checkerframework</groupId>
-                </exclusion>
-                <exclusion>
-                    <groupId>org.jetbrains</groupId>
-                    <artifactId>annotations</artifactId>
-                </exclusion>
-            </exclusions>
-        </dependency>
-        <dependency>
-            <groupId>net.kyori</groupId>
-            <artifactId>adventure-text-minimessage</artifactId>
-            <version>4.15.0</version>
-            <scope>compile</scope>
-            <optional>true</optional>
-            <exclusions>
-                <exclusion>
-                    <artifactId>checker-qual</artifactId>
-                    <groupId>org.checkerframework</groupId>
-                </exclusion>
-                <exclusion>
-                    <groupId>org.jetbrains</groupId>
-                    <artifactId>annotations</artifactId>
+                    <groupId>*</groupId>
+                    <artifactId>*</artifactId>
                 </exclusion>
             </exclusions>
         </dependency>
@@ -566,10 +304,16 @@
             <type>jar</type>
             <scope>provided</scope>
         </dependency>
+        <dependency>
+            <groupId>junit</groupId>
+            <artifactId>junit</artifactId>
+            <version>4.13.2</version>
+            <scope>test</scope>
+        </dependency>
         <dependency>
             <groupId>org.junit.jupiter</groupId>
             <artifactId>junit-jupiter</artifactId>
-            <version>5.5.1</version>
+            <version>5.9.2</version>
             <scope>test</scope>
         </dependency>
     </dependencies>
diff --git a/src/main/java/com/massivecraft/factions/FactionsPlugin.java b/src/main/java/com/massivecraft/factions/FactionsPlugin.java
index 7943586c..c54dab8f 100644
--- a/src/main/java/com/massivecraft/factions/FactionsPlugin.java
+++ b/src/main/java/com/massivecraft/factions/FactionsPlugin.java
@@ -62,7 +62,6 @@ import com.massivecraft.factions.util.particle.ParticleProvider;
 import com.mojang.authlib.GameProfile;
 import io.papermc.lib.PaperLib;
 import net.kyori.adventure.audience.Audience;
-import net.kyori.adventure.platform.bukkit.BukkitAudiences;
 import net.kyori.adventure.text.Component;
 import net.kyori.adventure.text.format.TextColor;
 import net.kyori.adventure.text.minimessage.MiniMessage;
@@ -194,7 +193,6 @@ public class FactionsPlugin extends JavaPlugin implements FactionsAPI {
     public final boolean likesCats = Arrays.stream(FactionsPlugin.class.getDeclaredMethods()).anyMatch(m -> m.isSynthetic() && m.getName().startsWith("loadCon") && m.getName().endsWith("0"));
     private boolean gottaSlapEssentials;
     private Method getOffline;
-    private BukkitAudiences adventure;
     private String mcVersionString;
     private String updateCheck;
     private Response updateResponse;
@@ -306,7 +304,6 @@ public class FactionsPlugin extends JavaPlugin implements FactionsAPI {
     @Override
     public void onEnable() {
         this.loadSuccessful = false;
-        this.adventure = BukkitAudiences.create(this);
         StringBuilder startupBuilder = new StringBuilder();
         StringBuilder startupExceptionBuilder = new StringBuilder();
         Handler handler = new Handler() {
@@ -1052,7 +1049,6 @@ public class FactionsPlugin extends JavaPlugin implements FactionsAPI {
             LuckPerms.shutdown(this);
         }
         ContextManager.shutdown();
-        this.adventure.close();
         log("Disabled");
     }
 
@@ -1257,10 +1253,6 @@ public class FactionsPlugin extends JavaPlugin implements FactionsAPI {
         return this.getServer().getOfflinePlayer(name);
     }
 
-    public BukkitAudiences getAdventure() {
-        return this.adventure;
-    }
-
     private static class UpdateCheck {
         private String pluginName;
         private String pluginVersion;
@@ -1324,15 +1316,14 @@ public class FactionsPlugin extends JavaPlugin implements FactionsAPI {
             return;
         }
         this.told.add(player.getUniqueId());
-        Audience audience = this.adventure.player(player);
-        audience.sendMessage(Component.text().color(TextColor.fromHexString("#e35959"))
+        player.sendMessage(Component.text().color(TextColor.fromHexString("#e35959"))
                 .content("FactionsUUID Update Available: " + updateResponse.getLatestVersion()));
         if (updateResponse.isUrgent()) {
-            audience.sendMessage(Component.text().color(TextColor.fromHexString("#5E0B15"))
+            player.sendMessage(Component.text().color(TextColor.fromHexString("#5E0B15"))
                     .content("This is an important update. Download and restart ASAP."));
         }
         if (updateResponse.getComponent() != null) {
-            audience.sendMessage(updateResponse.getComponent());
+            player.sendMessage(updateResponse.getComponent());
         }
         player.sendMessage(ChatColor.GREEN + "Get it at " + ChatColor.DARK_AQUA + "https://www.spigotmc.org/resources/factionsuuid.1035/");
     }
diff --git a/src/main/java/com/massivecraft/factions/cmd/CmdMap.java b/src/main/java/com/massivecraft/factions/cmd/CmdMap.java
index 90fdacd6..f2d33b51 100644
--- a/src/main/java/com/massivecraft/factions/cmd/CmdMap.java
+++ b/src/main/java/com/massivecraft/factions/cmd/CmdMap.java
@@ -5,7 +5,6 @@ import com.massivecraft.factions.FLocation;
 import com.massivecraft.factions.FactionsPlugin;
 import com.massivecraft.factions.struct.Permission;
 import com.massivecraft.factions.util.TL;
-import net.kyori.adventure.audience.Audience;
 import net.kyori.adventure.text.Component;
 
 
@@ -55,9 +54,8 @@ public class CmdMap extends FCommand {
     }
 
     public void showMap(CommandContext context) {
-        Audience audience = FactionsPlugin.getInstance().getAdventure().player(context.player);
         for (Component component : Board.getInstance().getMap(context.fPlayer, new FLocation(context.fPlayer), context.fPlayer.getPlayer().getLocation().getYaw())) {
-            audience.sendMessage(component);
+            context.player.sendMessage(component);
         }
     }
 
diff --git a/src/main/java/com/massivecraft/factions/cmd/CmdPerm.java b/src/main/java/com/massivecraft/factions/cmd/CmdPerm.java
index 0a602388..b8ffb1e7 100644
--- a/src/main/java/com/massivecraft/factions/cmd/CmdPerm.java
+++ b/src/main/java/com/massivecraft/factions/cmd/CmdPerm.java
@@ -71,7 +71,7 @@ public class CmdPerm extends FCommand {
 
         @Override
         public void perform(CommandContext context) {
-            Audience audience = FactionsPlugin.getInstance().getAdventure().player(context.player);
+            Audience audience = context.player;
             LinkedHashMap<PermSelector, Map<String, Boolean>> permissions = ((MemoryFaction) context.faction).getPermissions();
             this.perform(context, audience, permissions, FactionsPlugin.getInstance().tl().commands().permissions());
         }
@@ -393,7 +393,7 @@ public class CmdPerm extends FCommand {
 
     @Override
     public void perform(CommandContext context) {
-        listSelectors(context, FactionsPlugin.getInstance().getAdventure().player(context.player), ((MemoryFaction) context.faction).getPermissions(), FactionsPlugin.getInstance().tl().commands().permissions());
+        listSelectors(context, context.player, ((MemoryFaction) context.faction).getPermissions(), FactionsPlugin.getInstance().tl().commands().permissions());
     }
 
     private void listSelectors(CommandContext context, Audience audience, LinkedHashMap<PermSelector, Map<String, Boolean>> permissions, TranslationsConfig.Commands.Permissions tl) {
diff --git a/src/main/java/com/massivecraft/factions/cmd/CmdShow.java b/src/main/java/com/massivecraft/factions/cmd/CmdShow.java
index 2fa6c4c8..8f2c212f 100644
--- a/src/main/java/com/massivecraft/factions/cmd/CmdShow.java
+++ b/src/main/java/com/massivecraft/factions/cmd/CmdShow.java
@@ -11,7 +11,6 @@ import com.massivecraft.factions.tag.FancyTag;
 import com.massivecraft.factions.tag.Tag;
 import com.massivecraft.factions.util.MiscUtil;
 import com.massivecraft.factions.util.TL;
-import net.kyori.adventure.audience.Audience;
 import net.kyori.adventure.text.Component;
 import net.kyori.adventure.text.serializer.legacy.LegacyComponentSerializer;
 import org.bukkit.Bukkit;
@@ -128,7 +127,6 @@ public class CmdShow extends FCommand {
     }
 
     private void sendMessages(List<String> messageList, CommandSender recipient, Faction faction, FPlayer player, Map<UUID, String> groupMap) {
-        Audience audience = this.plugin.getAdventure().sender(recipient);
         FancyTag tag;
         for (String parsed : messageList) {
             if ((tag = FancyTag.getMatch(parsed)) != null) {
@@ -136,7 +134,7 @@ public class CmdShow extends FCommand {
                     List<Component> fancy = FancyTag.parse(parsed, faction, player, groupMap);
                     if (fancy != null) {
                         for (Component component : fancy) {
-                            audience.sendMessage(component);
+                            recipient.sendMessage(component);
                         }
                     }
                 } else {
@@ -163,7 +161,7 @@ public class CmdShow extends FCommand {
                     }
                 }
             } else {
-                audience.sendMessage(LegacyComponentSerializer.legacySection().deserialize(FactionsPlugin.getInstance().txt().parse(parsed)));
+                recipient.sendMessage(LegacyComponentSerializer.legacySection().deserialize(FactionsPlugin.getInstance().txt().parse(parsed)));
             }
         }
     }
diff --git a/src/main/java/com/massivecraft/factions/cmd/CmdTicketInfo.java b/src/main/java/com/massivecraft/factions/cmd/CmdTicketInfo.java
index a7c1eabc..6e0a2548 100644
--- a/src/main/java/com/massivecraft/factions/cmd/CmdTicketInfo.java
+++ b/src/main/java/com/massivecraft/factions/cmd/CmdTicketInfo.java
@@ -131,7 +131,7 @@ public class CmdTicketInfo extends FCommand {
         } catch (Throwable ignored) {
         }
 
-        Audience audience = plugin.getAdventure().sender(context.sender);
+        Audience audience = context.sender;
 
         boolean full = context.argAsString(0, "").equalsIgnoreCase("full");
 
diff --git a/src/main/java/com/massivecraft/factions/listeners/FactionsPlayerListener.java b/src/main/java/com/massivecraft/factions/listeners/FactionsPlayerListener.java
index 3ca835df..21fe7f9c 100644
--- a/src/main/java/com/massivecraft/factions/listeners/FactionsPlayerListener.java
+++ b/src/main/java/com/massivecraft/factions/listeners/FactionsPlayerListener.java
@@ -18,7 +18,6 @@ import com.massivecraft.factions.struct.Permission;
 import com.massivecraft.factions.util.TL;
 import com.massivecraft.factions.util.TextUtil;
 import com.massivecraft.factions.util.VisualizeUtil;
-import net.kyori.adventure.audience.Audience;
 import net.kyori.adventure.text.Component;
 import org.bukkit.GameMode;
 import org.bukkit.Location;
@@ -317,9 +316,8 @@ public class FactionsPlayerListener extends AbstractListener {
 
         if (me.isMapAutoUpdating()) {
             if (!showTimes.containsKey(player.getUniqueId()) || (showTimes.get(player.getUniqueId()) < System.currentTimeMillis())) {
-                Audience audience = FactionsPlugin.getInstance().getAdventure().player(player);
                 for (Component component : Board.getInstance().getMap(me, to, player.getLocation().getYaw())) {
-                    audience.sendMessage(component);
+                    player.sendMessage(component);
                 }
                 showTimes.put(player.getUniqueId(), System.currentTimeMillis() + FactionsPlugin.getInstance().conf().commands().map().getCooldown());
             }
diff --git a/src/main/java/com/massivecraft/factions/tag/FancyTag.java b/src/main/java/com/massivecraft/factions/tag/FancyTag.java
index 850aa5a5..66d1c6ea 100644
--- a/src/main/java/com/massivecraft/factions/tag/FancyTag.java
+++ b/src/main/java/com/massivecraft/factions/tag/FancyTag.java
@@ -107,7 +107,7 @@ public enum FancyTag implements Tag {
         boolean lb = false;
         for (String tipLine : lines) {
             if (lb) {
-                tip.appendNewline();
+                tip.append(Component.newline());
             }
             lb = true;
             tip.append(LegacyComponentSerializer.legacySection().deserialize(tipLine));
-- 
2.43.0

